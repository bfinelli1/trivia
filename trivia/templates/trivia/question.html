{% extends "trivia/layout.html" %}

{% block body %}

<script>
    document.addEventListener('DOMContentLoaded', function () {
        console.log("loaded");
        refreshRandom();

    });



    const refreshRandom = () => {

        fetch('https://jservice.io/api/clues?category=1970')
            .then((response) => response.json())
            .then((data) => {
                console.log('Response:', data)
                let questions = [];
                for (var i = 0; i < 4; i++) {
                    questions[i] = data[Math.floor(Math.random() * data.length)];
                }
                document.getElementById("clueValue").textContent = questions[0].value;
                document.getElementById("clueCategory").textContent = questions[0].category.title;
                document.getElementById("clueQuestion").textContent = questions[0].question;
                document.getElementById("clueAnswer1").textContent = questions[0].answer;
                document.getElementById("clueAnswer1").value = questions[0];
                document.getElementById("clueAnswer2").textContent = questions[1].answer;
                document.getElementById("clueAnswer2").value = questions[1];
                document.getElementById("clueAnswer3").textContent = questions[2].answer;
                document.getElementById("clueAnswer3").value = questions[2]
                document.getElementById("clueAnswer4").textContent = questions[3].answer;
                document.getElementById("clueAnswer4").value = questions[3]
            });
    };



</script>

<span id="clueCategory"></span>
<h3 id="clueQuestion"></h3>
value: <span id="clueValue"></span>
<br><br>

<form action="{%url 'question' %}" name="choice" method="post" id="categories">
    {% csrf_token %}

    <input type="radio" id="answer1" name="answers">
    <label id="clueAnswer1" for="answer1"></label><br>

    <input type="radio" id="answer2" name="answers">
    <label id="clueAnswer2" for="answer2"></label><br>

    <input type="radio" id="answer3" name="answers">
    <label id="clueAnswer3" for="answer3"></label><br>

    <input type="radio" id="answer4" name="answers">
    <label id="clueAnswer4" for="answer4"></label><br>
    <input class="btn btn-primary" type="submit" value="submit">

</form>
<button onclick="refreshRandom()">Next</button>

<br>
<a href="{% url 'index' %}" class="btn btn-primary">Go to index</a>


{% endblock %}